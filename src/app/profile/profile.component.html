<!-- Статус -->
<nav class="navbar navbar-default">
  <div class="container">
    <span class="navbar-brand">
      <img src="assets/logo.png" alt="logo">
    </span>

    <!-- Меню -->
    <ul class="nav navbar-nav">
      <!-- Главная (статус проектов) -->
      <li (click)="profileMode = 'taskList'"
          [ngClass]="{active: profileMode === 'taskList'}">
        <a href="#">
          <span class="fa fa-wd fa-tasks"></span>
          Projects status
        </a>
      </li>

      <!-- Рейтинг -->
      <li (click)="profileMode = 'rating'"
          [ngClass]="{active: profileMode === 'rating'}">
        <a href="#">
          <span class="fa fa-wd fa-star"></span>
          Rating
        </a>
      </li>

      <!-- Вывод денег -->
      <li (click)="profileMode = 'withdrawal'"
          [ngClass]="{active: profileMode === 'withdrawal'}">
        <a href="#">
          <span class="fa fa-wd fa-money"></span>
          Withdrawal
        </a>
      </li>
    </ul>

    <p class="navbar-text navbar-right">
      <!-- Nickname (не может повторяться) -->
      <span class="dropdown">
        <span class="clickable dropdown-toggle" data-toggle="dropdown">Signed in as <u>{{ user.nickname }}</u></span>
        <ul class="dropdown-menu">

          <!-- Рейтинг аннотатора -->
          <li>
            <a href="#">
              <span class="fa fa-wd fa-star"></span>
              Rating: {{ user.rating }}
            </a>
          </li>

          <!-- Статус баланса -->
          <!-- Сумма вознаграждения доступная для вывода -->
          <li>
            <a href="#">
              <span class="fa fa-wd fa-money"></span>
              Money available: {{ user.money.available }}
            </a>
          </li>
          <!-- Также сумма вознаграждения доступная для вывода после выполнения задач на которые подписался аннотатор -->
          <li>
            <a href="#">
              <span class="fa fa-wd fa-money"></span>
              Money reserved: {{ user.money.reserved }}
            </a>
          </li>

          <li role="separator" class="divider"></li>

          <!-- Профиль (меню) -->
          <li (click)="profileMode = 'editing'">
            <a href="#">
              <span class="fa fa-wd fa-pencil"></span>
              Edit profile
            </a>
          </li>

          <li (click)="common.mode = 'auth'">
            <a href="#">
              <span class="fa fa-wd fa-sign-out"></span>
              Sign out
            </a>
          </li>
        </ul>
      </span>
    </p>
  </div>
</nav>


<div class="container">
  <!--
    Заполнение анкеты в Личном кабинете.
    Данные из анкеты вносятся в профиль.
    Профиль можно редактировать.
    Обязательные для заполнения пункты отмечены выделенным текстом.
  -->
  <form *ngIf="profileMode === 'editing'">
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input type="text" class="form-control" id="firstName" placeholder="John">
    </div>
    <div class="form-group">
      <label for="secondName">Second Name</label>
      <input type="text" class="form-control" id="secondName" placeholder="Doe">
    </div>
    <div class="form-group">
      <label for="Login">Login</label>
      <input type="text" class="form-control" id="Login" placeholder="johndoe_42">
    </div>
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" class="form-control" id="email" placeholder="johndoe_42@gmail.com">
    </div>
    <button type="submit" class="btn btn-primary btn-block" (click)="editingProfile = false">Save</button>
  </form>


  <!-- Задания -->
  <div *ngIf="profileMode === 'taskList'">
    <h2>Tasks</h2>
    <h3>Annotating emotional conditions</h3>
    <table class="table table-hover">
      <thead>
        <tr>
          <th colspan="2">Projects</th>
          <th colspan="3">Status</th>
        </tr>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Activity</th>
          <th>Completed</th>
          <th>Earned</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of projects.annotating; let i = index"
          (click)="profileMode = 'project'; projectId = project.id">
          <td>{{ i + 1 }}</td>
          <td>{{ project.title }}</td>
          <td>{{ project.isActive ? "Active" : "Contest stage" }}</td>
          <td>{{ project.percentage }}%</td>
          <td>{{ project.earned() }}/{{ project.price }}</td>
        </tr>
      </tbody>
    </table>

    <h3>Marking video fragments</h3>
    <table class="table table-hover">
      <thead>
        <tr>
          <th colspan="2">Projects</th>
          <th colspan="3">Status</th>
        </tr>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Activity</th>
          <th>Completed</th>
          <th>Earned</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of projects.marking; let i = index"
          (click)="profileMode = 'project'; projectId = project.id">
          <td>{{ i + 1 }}</td>
          <td>{{ project.title }}</td>
          <td>{{ project.isActive ? "Active" : "Contest stage" }}</td>
          <td>{{ project.percentage }}%</td>
          <td>{{ project.earned() }}/{{ project.price }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <na-project *ngIf="profileMode === 'project'" [projectId]="projectId"></na-project>
</div>