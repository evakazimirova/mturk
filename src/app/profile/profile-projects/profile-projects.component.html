<!-- Описание проекта -->
<na-project *ngIf="projectMode"
  [projectId]="projectId"
  (returned)="projectMode = false"></na-project>

<!-- Прогресс-бар -->
<div class="p-bar">
  <div *ngFor="let task of progressBar; let i = index">
    <div [ngClass]="{done: task.done}" class="fa fa-3x fa-fw fa-arrow-right" *ngIf="i > 0"></div>
    <div [ngClass]="{done: task.done}" class="box">
      <span>{{ task.action }}</span>
    </div>
  </div>
</div>

<div class="task" *ngIf="!this.common.user.demo"
  (click)="startDemoTask()">
  Demo Task
  <!-- Индикатор загрузки -->
  <!-- <span class="fa fa-cog fa-spin"></span> -->

  <!-- Дополнительная информация -->
  <div class="description">
    <span>Completed: 0%</span>
    <span>Earned: $0/$1</span>
  </div>

  <!-- Замочек -->
  <span class="fa fa-lock fa-5x"></span>
</div>

<!-- Основная страница -->
<div>
  <div *ngIf="!projectMode && isLoaded">
    <!-- Список проектов -->
    <div *ngFor="let project of common.projects">
      <h1>{{ project.projectName }}</h1>
      <div class="task" *ngFor="let task of project.taskTypes; let i = index"
        [ngClass]="{locked: common.user.profile === 0 || i >= common.user.level || (common.user.taskTaken !== null && i !== common.user.taskTaken - 1)}"
        (click)="taskSelected(project, i)">
        {{ task.title }}
        <!-- Индикатор загрузки -->
        <span class="fa fa-cog fa-spin" *ngIf="loadingTask === i"></span>

        <!-- Дополнительная информация -->
        <div class="description">
          <span>Tasks Amount: {{ task.tasksAmount }}</span>
          <span *ngIf="common.user.taskTaken !== null && i === common.user.taskTaken - 1">Completed: {{ project.annoTask.percentage }}%</span>
          <span *ngIf="common.user.taskTaken !== null && i === common.user.taskTaken - 1">
            Earned: ${{ project.annoTask.earned }}/${{ project.annoTask.price }}
          </span>
          <span *ngIf="common.user.taskTaken === null || i !== common.user.taskTaken - 1">
            Price: ${{ task.price * task.tasksAmount }}
          </span>
          <span *ngIf="common.user.taskTaken === null || i !== common.user.taskTaken - 1">Estimated work time: {{ task.EWT }} min</span>
        </div>

        <!-- Замочек -->
        <span class="fa fa-lock fa-5x"></span>
      </div>
      <!-- <span (click)="viewProjectDescription(i)"></span> -->
    </div>
  </div>

  <!-- Индикатор загрузки страницы -->
  <na-loader-big *ngIf="!isLoaded"></na-loader-big>
</div>